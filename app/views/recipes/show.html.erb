<h2 class='recipe'>
  <%= @recipe.name %>
  <% if can? :update, @recipe %>
    <%= link_to '[edit]', [:edit, @recipe], :remote => true %>
  <% end %>
</h2>

<ul>
  <% @recipe.ingredients.each do |ingredient| %>
    <li>
      <% if ingredient.quantity.present? %>
        <%= ingredient.quantity %> &mdash;
      <% end %>
      <%= ingredient.name %>
    </li>
  <% end %>
</ul>

<%= markdown @recipe.directions %>

<div id='bottom-links'>
  <%= link_to 'Download',
          polymorphic_path([@user, @recipe], :format => 'pdf') %> |

  <% if can? :destroy, @recipe %>
    <%= link_to 'Remove Recipe', @recipe, :method => :delete, :remote => true,
          :confirm => 'Are you sure?' %> |
  <% end %>

  <% if can? :create, @user.recipes.build %>
    <%= link_to 'Add Recipe', new_recipe_path, :remote => true %> |
  <% end %>

  <% if @user %>
    <%= link_to "All of #{@user.first_name}'s recipes", [@user, :recipes],
          :remote => true %>
  <% else %>
    <%= link_to 'All Your Recipes', recipes_path, :remote => true %>
  <% end %>
</div>
