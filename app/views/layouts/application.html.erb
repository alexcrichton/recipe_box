<!DOCTYPE html>
<html>
  <head>
    <title><%= show_title? ? yield(:title) : 'Recipe Box' %></title>
    <%= stylesheet_link_tag 'application', :media => 'all' %>
    <% javascripts 'box', 'rails', 'jquery/autocomplete' %>

    <%= stylesheet_tags 'box', 'recipes/form', 'pagination' %>
    <%= javascript_tags  %>
    <%= csrf_meta_tag %>
    <meta property='og:site_name' content='Recipe Box'/>
  </head>
  <body>
    <div id="container">
      <% if @user %>
        <div id='name'><%= @user.name %>'s Recipes</div>
      <% else %>
        <div id='name'>Your Recipes</div>
      <% end %>

      <div id='buttons'>
        <% if can? :create, @user ? @user.recipes.build : Recipe %>
          <%= link_to content_tag(:span, 'Add recipe'),
                new_recipe_path, :remote => true, :class => 'add' %>

        <% else %>
          <%= link_to content_tag(:span, 'Your Recipes'), root_path,
                :class => 'mine' %>
        <% end %>

        <%= link_to content_tag(:span, 'Friends'),
              friends_path, :remote => true, :class => 'myfriends' %>

        <%= link_to content_tag(:span, 'Search'),
              [@user, :recipes], :remote => true, :class => 'search' %>
      </div>

      <div id='card'<%= %( class='start').html_safe unless yield.blank? %>>
        <%= link_to 'go back', root_path, :class => 'close', :remote => true %>

        <div class='content'>
          <%= yield %>
        </div>
      </div>
    </div>

    <div id="fb-root" style='display:none'></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({appId: '<%= Rails.application.config.fb_app_id %>',
                 status: true, cookie: true, xfbml: true});
      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>
  </body>
</html>
